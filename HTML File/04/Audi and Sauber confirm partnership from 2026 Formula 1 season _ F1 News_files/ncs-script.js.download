(function(){function f(a){this.foundVideoPlayers=[];this.SearchForNewVideoPlayersInterval=5E3;this.newVideoFoundCallback=a;this.init=function(){this.trackVideos()};this.trackVideos=function(){function b(b){b.contentWindow&&e.searchForVideosInWindow(b.contentWindow)}this.searchForVideosInWindow(window);for(var c=window.document.getElementsByTagName("iframe"),e=this,a=0;a<c.length;a++)b(c[a]);e=this;setTimeout(function(){e.trackVideos()},this.SearchForNewVideoPlayersInterval)};this.searchForVideosInWindow=
function(b){try{b.jwplayer}catch(c){return}this.searchForFlowPlayerPlayersInWindow(b);this.searchForJWPlayerPlayersInWindow(b);this.searchForVideoJSPlayersInWindow(b)};this.searchForFlowPlayerPlayersInWindow=function(b){if(b.flowplayer){var c=[],a=0;if("undefined"!=typeof b.flowplayer.instances)for(b.flowplayer.instances.forEach(function(b){c.push(b)}),a=0;a<c.length;a++)0>this.foundVideoPlayers.indexOf(c[a])&&(this.foundVideoPlayers.push(c[a]),this.newVideoFoundCallback("flowPlayer",c[a]))}};this.searchForJWPlayerPlayersInWindow=
function(b){if(b.jwplayer){var c=[];for(a=0;b.jwplayer(a).id;)c.push(b.jwplayer(a)),a++;for(var a=0;a<c.length;a++){b=!0;for(var d=0;d<this.foundVideoPlayers.length;d++)this.foundVideoPlayers[d].id&&this.foundVideoPlayers[d].id==c[a].id&&(b=!1);b&&(this.foundVideoPlayers.push(c[a]),this.newVideoFoundCallback("jwPlayer",c[a]))}}};this.searchForVideoJSPlayersInWindow=function(a){if(a.videojs&&"object"==typeof a.videojs.players)for(videoId in a.videojs.players){var b=a.videojs.players[videoId];0>this.foundVideoPlayers.indexOf(b)&&
(this.foundVideoPlayers.push(b),this.newVideoFoundCallback("videojs",b))}}}var g=new function(){this.SettingsObject=window.DotMetricsSettings;this._sentVideoUrls=[];this.Start=function(){var a=this;(new f(function(b,c){switch(b){case "flowPlayer":a.trackFP(c);break;case "jwPlayer":a.trackJW(c);break;case "videojs":a.trackVideoJS(c)}})).init()};this.sendData=function(a){if(!(0<=this._sentVideoUrls.indexOf(a))){var b=this.SettingsObject.SiteSectionId,c=window.location.hostname,e=encodeURIComponent(window.location),
d=this.SettingsObject.PVID,f=(new Date).getTimezoneOffset();b=this.SettingsObject.NCSHitUrl+"?videoUrl="+a+"&id="+b+"&dom="+c+"&url="+e+"&pvid="+d+"&tzOffset="+f;(new Image).src=b;this._sentVideoUrls.push(a)}};this.trackFP=function(a){var b=this;a.on("playing",function(c){b.sendData(a.currentSrc)})};this.trackJW=function(a){var b=this;a.on("play",function(c){c=a.getPlaylistItem();"undefined"!=typeof c&&b.sendData(c.file)})};this.trackVideoJS=function(a){var b=this;a.on("play",function(){b.sendData(a.currentSrc())})}};
top.location==self.location&&setTimeout(function(){g.Start()},100)})(window);
