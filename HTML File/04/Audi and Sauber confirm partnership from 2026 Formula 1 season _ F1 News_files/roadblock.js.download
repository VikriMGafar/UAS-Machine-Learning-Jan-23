define("roadblock", [ "util", "widget-lite" ], function(e, o) {
    "use strict";
    return o.extend({
        roadblockType: "none",
        messageNoSkyId: "You need to sign in to view this video",
        messageNoSub: "You need to subscribe to view this video",
        messageMobile: "This content is available in our app",
        messageNotOnMobile: !1,
        messageLink: "http://www.skyid.com/signin",
        messageLinkAndroid: !1,
        messageLinkIos: !1,
        redirectLocation: "https://skyid.sky.com/signin/sports",
        init: function() {
            this.roadblockBarrier = this.rootElement.querySelector('[data-role="roadblock-success"]'), 
            this.roadblockOverlay = this.rootElement.querySelector('[data-role="roadblock-overlay"]'), 
            this.roadblockText = this.rootElement.querySelector('[data-role="roadblock-text"]'), 
            this.signInLink && (this.roadblockOverlay.href = this.signInLink);
            var e = this.canPass();
            if (!0 === e) return this.roadblockBarrier.classList.add("callfn"), this.roadblockBarrier.removeAttribute("data-role"), 
            void this.removeRoadblock();
            var o = this.redirectLocation.includes("tag_replace") ? this.redirectLocation.replace("tag_replace", top.window.location.href) : this.redirectLocation;
            this.roadblockOverlay.addEventListener("click", function(e) {
                e.preventDefault(), window !== top ? top.window.location.href = o : window.location.href = o;
            }), !0 === e ? (this.roadblockBarrier.classList.add("callfn"), this.roadblockBarrier.removeAttribute("data-role"), 
            this.removeRoadblock()) : (this.addMessage(e), this.roadblockOverlay.style.opacity = 1);
        },
        canPass: function() {
            if (this.isBridge()) return !0;
            if ("skyid" === this.roadblockType) return !!SKY_SPORTS.user.isLoggedIn || this.messageNoSkyId;
            if ("premium" !== this.roadblockType && "premium_allow_mobile" !== this.roadblockType) return !0;
            var e = !1;
            return "premium_allow_mobile" === this.roadblockType && (e = !0), SKY_SPORTS.user.isLoggedIn ? this.canWatchPremium(e) : this.messageNoSkyId;
        },
        hasNowTVUrl: function() {
            var e = this.roadblockBarrier.getAttribute("data-nowtv-url");
            if (e && e.length) return !0;
        },
        canWatchPremium: function(e) {
            if (SKY_SPORTS) return !(!SKY_SPORTS.user.isNowTV || !this.hasNowTVUrl()) || (SKY_SPORTS.user.isWholesale || SKY_SPORTS.user.isSkySports ? !(SKY_SPORTS.device.mobile && !e) || (this.messageNotOnMobile && (this.roadblockOverlay.style.pointerEvents = "none"), 
            SKY_SPORTS.device.ios && this.messageLinkIos && (this.roadblockOverlay.href = this.messageLinkIos), 
            SKY_SPORTS.device.android && this.messageLinkAndroid && (this.roadblockOverlay.href = this.messageLinkAndroid), 
            this.messageNotOnMobile ? this.messageNotOnMobile : this.messageMobile) : (this.redirectLocation = "/get-sky", 
            this.messageNoSub));
        },
        addMessage: function(e) {
            this.roadblockText.textContent = e;
        },
        removeRoadblock: function() {
            this.roadblockOverlay.parentNode.removeChild(this.roadblockOverlay);
        },
        isIframe: function() {
            return window.self !== window.top;
        },
        getRoot: function() {
            if (this.isIframe()) try {
                return window.top.document, window.top;
            } catch (e) {
                return null;
            }
            return window;
        },
        isBridge: function() {
            var e = this.getRoot(window);
            return !e || (void 0 !== e.webBridgeEnabled || void 0 !== e.SKY_SPORTS_APP || void 0 !== e.appWrapper || void 0 !== e.AndroidApp || void 0);
        }
    });
});