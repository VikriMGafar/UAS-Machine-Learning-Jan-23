define("vm-suppression", [ "widget-lite" ], function(e) {
    return e.extend({
        init: function() {
            this.isWholesale() && (this.suppressListItem("/watch/sky-sports-racing"), this.suppressEpgRelatedLinks());
        },
        isWholesale: function() {
            var e = this.getCookie("skySportsSSO");
            return void 0 !== e && 0 === e.indexOf("WIG");
        },
        getCookie: function(e) {
            var t = ("; " + document.cookie).split("; " + e + "=");
            return 2 === t.length ? t.pop().split(";").shift() : "";
        },
        suppressListItem: function(e) {
            for (var t = document.querySelectorAll('[href~="' + e + '"]'), n = 0; n < t.length; n++) t[n].parentNode && "LI" === t[n].parentNode.tagName && (t[n].parentNode.style.display = "none", 
            t[n].parentNode.classList.add("hidden-channel"));
        },
        suppressEpgRelatedLinks: function() {
            var e = document.querySelectorAll(".tv-epg-related-links, .tv-epg-related-links-mini");
            e.length && window.Element && !Element.prototype.closest && this.addClosestPolyfill();
            for (var t = 0; t < e.length; t++) {
                var n = e[t].closest(".box");
                this.getVisibleItems(n) % 2 && (e[t].style.display = "none");
            }
        },
        getVisibleItems: function(e) {
            var t = e.querySelectorAll(".item"), n = e.querySelectorAll(".item.hidden-channel");
            return t.length - n.length;
        },
        addClosestPolyfill: function() {
            Element.prototype.closest = function(e) {
                var t, n = (this.document || this.ownerDocument).querySelectorAll(e), s = this;
                do {
                    for (t = n.length; 0 <= --t && n.item(t) !== s; ) ;
                } while (t < 0 && (s = s.parentElement));
                return s;
            };
        }
    });
});